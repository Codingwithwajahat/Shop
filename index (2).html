<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urban Threads | Modern Fashion Store</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #ffffff;
        }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .page { display: none; }
        .page.active { display: block; }
        .modal { display: none; }
        .modal.active { display: flex; }
        .toast { animation: slideIn 0.3s ease, slideOut 0.3s ease 2.7s; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideOut { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }
        .whatsapp-btn {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
        }
        .whatsapp-btn:hover {
            background: linear-gradient(135deg, #128C7E 0%, #075E54 100%);
        }
    </style>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { orange: '#ff7b3a', darkOrange: '#e06a30', black: '#1a1a1a', grey: '#888888' },
                        whatsapp: { green: '#25D366', dark: '#128C7E' }
                    },
                    boxShadow: { 'soft': '0 10px 40px -10px rgba(0,0,0,0.08)' }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen">

    <div id="app" class="w-full bg-white">
        
        <!-- Header -->
        <header class="border-b border-gray-100 sticky top-0 bg-white/95 backdrop-blur-sm z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex items-center justify-between">
                <div class="flex items-center gap-2 cursor-pointer" onclick="navigateTo('home')">
                    <div class="w-10 h-10 bg-brand-orange rounded-xl flex items-center justify-center text-white">
                        <i class="ph-bold ph-coat-hanger text-2xl"></i>
                    </div>
                    <span class="text-xl font-bold tracking-tight text-brand-black">Urban Threads</span>
                </div>

                <nav class="hidden md:flex items-center gap-8" id="nav-links">
                    <a href="#" onclick="navigateTo('home')" data-page="home" class="nav-link text-brand-black font-semibold border-b-2 border-brand-orange pb-0.5">Home</a>
                    <a href="#" onclick="navigateTo('latest')" data-page="latest" class="nav-link text-gray-500 hover:text-brand-orange transition-colors font-medium">Latest</a>
                    <a href="#" onclick="navigateTo('men')" data-page="men" class="nav-link text-gray-500 hover:text-brand-orange transition-colors font-medium">Men</a>
                    <a href="#" onclick="navigateTo('women')" data-page="women" class="nav-link text-gray-500 hover:text-brand-orange transition-colors font-medium">Women</a>
                    <a href="#" onclick="navigateTo('sale')" data-page="sale" class="nav-link text-red-500 hover:text-red-600 transition-colors font-medium">Sale</a>
                </nav>

                <div class="flex items-center gap-3">
                    <button onclick="toggleSearch()" class="w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center text-brand-black transition-colors">
                        <i class="ph ph-magnifying-glass text-xl"></i>
                    </button>
                    <button onclick="toggleWishlist()" class="w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center text-brand-black transition-colors relative">
                        <i class="ph ph-heart text-xl"></i>
                        <span id="wishlist-count" class="hidden absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full items-center justify-center font-bold">0</span>
                    </button>
                    <button onclick="toggleCart()" class="w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center text-brand-black transition-colors relative">
                        <i class="ph ph-shopping-bag text-xl"></i>
                        <span id="cart-count" class="hidden absolute -top-1 -right-1 min-w-5 h-5 px-1 bg-brand-orange text-white text-xs rounded-full items-center justify-center font-bold">0</span>
                    </button>
                    <button onclick="toggleMobileMenu()" class="md:hidden w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center text-brand-black">
                        <i class="ph ph-list text-2xl" id="mobile-menu-icon"></i>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 px-6 py-4">
                <nav class="flex flex-col gap-4">
                    <a href="#" onclick="navigateTo('home'); toggleMobileMenu();" class="text-brand-black font-medium py-2">Home</a>
                    <a href="#" onclick="navigateTo('latest'); toggleMobileMenu();" class="text-gray-500 font-medium py-2">Latest</a>
                    <a href="#" onclick="navigateTo('men'); toggleMobileMenu();" class="text-gray-500 font-medium py-2">Men</a>
                    <a href="#" onclick="navigateTo('women'); toggleMobileMenu();" class="text-gray-500 font-medium py-2">Women</a>
                    <a href="#" onclick="navigateTo('sale'); toggleMobileMenu();" class="text-red-500 font-medium py-2">Sale</a>
                </nav>
            </div>

            <!-- Search Bar -->
            <div id="search-bar" class="hidden bg-white border-t border-gray-100 px-6 py-4">
                <div class="max-w-2xl mx-auto relative">
                    <input type="text" id="search-input" placeholder="Search for products..." 
                           class="w-full px-5 py-3 pl-12 rounded-full border border-gray-200 focus:border-brand-orange focus:outline-none"
                           oninput="handleSearch(this.value)">
                    <i class="ph ph-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl"></i>
                    <div id="search-results" class="absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-xl border border-gray-100 max-h-96 overflow-y-auto hidden z-50"></div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main id="main-content">
            <!-- Home Page -->
            <div id="page-home" class="page active">
                <!-- Hero Section -->
                <section class="px-4 sm:px-6 py-12 lg:py-20 max-w-7xl mx-auto">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                        <div class="space-y-8 order-2 lg:order-1 text-center lg:text-left">
                            <h1 class="text-4xl sm:text-5xl lg:text-7xl font-bold text-brand-black leading-[1.1] tracking-tight">
                                Make Your Style <br>
                                <span class="relative inline-block">
                                    Look Perfect
                                    <svg class="absolute w-full h-3 -bottom-1 left-0 text-brand-orange opacity-30" viewBox="0 0 100 10" preserveAspectRatio="none">
                                        <path d="M0 5 Q 50 10 100 5" stroke="currentColor" stroke-width="8" fill="none" />
                                    </svg>
                                </span>
                            </h1>
                            <p class="text-gray-500 text-lg max-w-lg mx-auto lg:mx-0 leading-relaxed">
                                Discover the latest trends in fashion with our premium collection. Minimal designs, high-quality fabrics, and styles that define you.
                            </p>
                            
                            <div class="flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4">
                                <button onclick="navigateTo('latest')" class="w-full sm:w-auto bg-[#ff7b3a] hover:bg-[#e06a30] text-white px-8 py-4 rounded-full font-semibold transition-all transform hover:scale-105 shadow-lg flex items-center justify-center gap-2">
                                    <i class="ph ph-shopping-bag text-xl"></i>
                                    <span class="text-white">Shop Now</span>
                                </button>
                                <button onclick="openWhatsAppChat()" class="w-full sm:w-auto bg-[#25D366] hover:bg-[#128C7E] text-white px-8 py-4 rounded-full font-semibold transition-all transform hover:scale-105 shadow-lg flex items-center justify-center gap-2">
                                    <i class="ph-fill ph-whatsapp-logo text-xl"></i>
                                    <span class="text-white">Chat on WhatsApp</span>
                                </button>
                            </div>

                            <div class="pt-8">
                                <p class="text-xs text-gray-400 font-medium mb-3 uppercase tracking-wider">We are available on other stores</p>
                                <div class="flex flex-wrap justify-center lg:justify-start gap-6 opacity-50 grayscale hover:grayscale-0 transition-all duration-500">
                                    <span class="text-xl font-bold font-serif italic">Vogue</span>
                                    <span class="text-xl font-black tracking-widest">HYPE</span>
                                    <span class="text-xl font-semibold">UrbanFit</span>
                                    <span class="text-xl font-bold">ZARA</span>
                                </div>
                            </div>
                        </div>

                        <div class="order-1 lg:order-2 relative group">
                            <div class="relative bg-gray-100 rounded-[2.5rem] overflow-hidden aspect-[3/4] lg:aspect-[4/5] shadow-2xl">
                                <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?q=80&w=1000&auto=format&fit=crop" 
                                     alt="Fashion Model" 
                                     class="w-full h-full object-cover object-top transition-transform duration-700 group-hover:scale-105">
                                
                                <div class="absolute bottom-8 right-8 bg-white/90 backdrop-blur px-6 py-3 rounded-full shadow-lg flex items-center gap-2">
                                    <div class="w-2 h-2 rounded-full bg-brand-orange"></div>
                                    <span class="text-sm font-bold text-brand-black">New Season • 2026</span>
                                </div>
                            </div>
                            
                            <div class="absolute -z-10 top-10 -right-10 w-40 h-40 bg-brand-orange/10 rounded-full blur-3xl"></div>
                            <div class="absolute -z-10 bottom-10 -left-10 w-60 h-60 bg-blue-500/5 rounded-full blur-3xl"></div>
                        </div>
                    </div>
                </section>

                <!-- Category Icons -->
                <section class="max-w-7xl mx-auto px-4 sm:px-6 py-10 border-y border-gray-100">
                    <div class="grid grid-cols-3 md:grid-cols-6 gap-4 sm:gap-6" id="category-icons"></div>
                </section>

                <!-- Popular This Season -->
                <section class="max-w-7xl mx-auto px-4 sm:px-6 py-16">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl md:text-4xl font-bold text-brand-black mb-3">Popular This Season</h2>
                        <p class="text-gray-500 max-w-xl mx-auto">The most sought-after styles handpicked by our fashion editors for your wardrobe update.</p>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="popular-products"></div>
                </section>

                <!-- Promo Banner -->
                <section class="max-w-7xl mx-auto px-4 sm:px-6 mb-16">
                    <div class="bg-gradient-to-r from-[#f9f1eb] to-[#fef3e9] rounded-[2rem] overflow-hidden flex flex-col md:flex-row relative">
                        <div class="p-8 md:p-16 flex flex-col justify-center items-start z-10 w-full md:w-1/2">
                            <span class="text-brand-orange font-bold tracking-wider text-sm mb-2 uppercase">Limited Time Offer</span>
                            <h2 class="text-4xl md:text-5xl font-bold text-brand-black mb-4">Up to 30% Off<br>Winter Collection</h2>
                            <p class="text-gray-600 mb-8 max-w-md">Upgrade your cold-weather wardrobe with our premium selection of coats, sweaters, and accessories.</p>
                            <button onclick="navigateTo('sale')" class="bg-brand-black text-white px-8 py-4 rounded-full font-semibold hover:bg-brand-orange transition-colors flex items-center gap-2">
                                <i class="ph ph-tag text-xl"></i>
                                Shop Sale
                            </button>
                        </div>
                        <div class="w-full md:w-1/2 h-64 md:h-auto relative">
                            <img src="https://images.unsplash.com/photo-1516762689617-e1cffcef479d?q=80&w=1000&auto=format&fit=crop" 
                                 alt="Winter Sale" 
                                 class="absolute inset-0 w-full h-full object-cover object-center">
                            <div class="absolute inset-0 bg-gradient-to-t from-[#f9f1eb] to-transparent md:bg-gradient-to-l md:from-transparent md:to-[#f9f1eb]"></div>
                        </div>
                    </div>
                </section>

                <!-- New Arrival Feature -->
                <section class="max-w-7xl mx-auto px-4 sm:px-6 mb-16" id="featured-product-section"></section>

                <!-- Recommended Products -->
                <section class="max-w-7xl mx-auto px-4 sm:px-6 mb-16">
                    <div class="flex items-end justify-between mb-8">
                        <div>
                            <h2 class="text-2xl md:text-3xl font-bold text-brand-black">Recommended Products</h2>
                            <p class="text-gray-500 text-sm mt-1">Curated picks just for you.</p>
                        </div>
                        <a href="#" onclick="navigateTo('latest')" class="text-brand-orange font-semibold text-sm hover:underline">View All</a>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="recommended-products"></div>
                </section>
            </div>

            <!-- Latest Page -->
            <div id="page-latest" class="page">
                <section class="max-w-7xl mx-auto px-4 sm:px-6 py-12">
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
                        <div>
                            <h1 class="text-3xl md:text-4xl font-bold text-brand-black">Latest Arrivals</h1>
                            <p class="text-gray-500 mt-2">Fresh styles just dropped</p>
                        </div>
                        <div class="flex gap-3">
                            <select id="sort-latest" onchange="sortProducts('latest')" class="px-4 py-2 rounded-full border border-gray-200 text-sm focus:outline-none focus:border-brand-orange">
                                <option value="newest">Newest First</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                                <option value="popular">Most Popular</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="latest-products"></div>
                </section>
            </div>

            <!-- Men Page -->
            <div id="page-men" class="page">
                <section class="max-w-7xl mx-auto px-4 sm:px-6 py-12">
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
                        <div>
                            <h1 class="text-3xl md:text-4xl font-bold text-brand-black">Men's Collection</h1>
                            <p class="text-gray-500 mt-2">Style essentials for the modern man</p>
                        </div>
                        <div class="flex flex-wrap gap-3">
                            <div class="flex gap-2 flex-wrap" id="men-filters"></div>
                            <select id="sort-men" onchange="sortProducts('men')" class="px-4 py-2 rounded-full border border-gray-200 text-sm focus:outline-none focus:border-brand-orange">
                                <option value="newest">Newest First</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="men-products"></div>
                </section>
            </div>

            <!-- Women Page -->
            <div id="page-women" class="page">
                <section class="max-w-7xl mx-auto px-4 sm:px-6 py-12">
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
                        <div>
                            <h1 class="text-3xl md:text-4xl font-bold text-brand-black">Women's Collection</h1>
                            <p class="text-gray-500 mt-2">Elegant styles for every occasion</p>
                        </div>
                        <div class="flex flex-wrap gap-3">
                            <div class="flex gap-2 flex-wrap" id="women-filters"></div>
                            <select id="sort-women" onchange="sortProducts('women')" class="px-4 py-2 rounded-full border border-gray-200 text-sm focus:outline-none focus:border-brand-orange">
                                <option value="newest">Newest First</option>
                                <option value="price-low">Price: Low to High</option>
                                <option value="price-high">Price: High to Low</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="women-products"></div>
                </section>
            </div>

            <!-- Sale Page -->
            <div id="page-sale" class="page">
                <section class="max-w-7xl mx-auto px-4 sm:px-6 py-12">
                    <div class="bg-gradient-to-r from-red-500 to-orange-500 rounded-3xl p-8 md:p-12 mb-12 text-white">
                        <h1 class="text-4xl md:text-5xl font-bold mb-4">Season Sale</h1>
                        <p class="text-xl opacity-90 mb-6">Up to 50% off on selected items</p>
                        <div class="flex gap-4 text-center">
                            <div class="bg-white/20 backdrop-blur rounded-xl px-4 py-3">
                                <span class="block text-2xl font-bold" id="countdown-days">00</span>
                                <span class="text-xs">Days</span>
                            </div>
                            <div class="bg-white/20 backdrop-blur rounded-xl px-4 py-3">
                                <span class="block text-2xl font-bold" id="countdown-hours">00</span>
                                <span class="text-xs">Hours</span>
                            </div>
                            <div class="bg-white/20 backdrop-blur rounded-xl px-4 py-3">
                                <span class="block text-2xl font-bold" id="countdown-mins">00</span>
                                <span class="text-xs">Mins</span>
                            </div>
                            <div class="bg-white/20 backdrop-blur rounded-xl px-4 py-3">
                                <span class="block text-2xl font-bold" id="countdown-secs">00</span>
                                <span class="text-xs">Secs</span>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="sale-products"></div>
                </section>
            </div>

            <!-- Product Detail Page -->
            <div id="page-product" class="page">
                <section class="max-w-7xl mx-auto px-4 sm:px-6 py-12" id="product-detail"></section>
            </div>

            <!-- Cart Page -->
            <div id="page-cart" class="page">
                <section class="max-w-7xl mx-auto px-4 sm:px-6 py-12">
                    <h1 class="text-3xl md:text-4xl font-bold text-brand-black mb-8">Shopping Cart</h1>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2" id="cart-items"></div>
                        <div class="bg-gray-50 rounded-3xl p-6 h-fit sticky top-24" id="cart-summary"></div>
                    </div>
                </section>
            </div>

            <!-- Wishlist Page -->
            <div id="page-wishlist" class="page">
                <section class="max-w-7xl mx-auto px-4 sm:px-6 py-12">
                    <h1 class="text-3xl md:text-4xl font-bold text-brand-black mb-8">My Wishlist</h1>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="wishlist-items"></div>
                </section>
            </div>

            <!-- Checkout Page -->
            <div id="page-checkout" class="page">
                <section class="max-w-7xl mx-auto px-4 sm:px-6 py-12">
                    <h1 class="text-3xl md:text-4xl font-bold text-brand-black mb-8">Checkout</h1>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12" id="checkout-content"></div>
                </section>
            </div>

            <!-- Order Confirmation -->
            <div id="page-confirmation" class="page">
                <section class="max-w-2xl mx-auto px-4 sm:px-6 py-20 text-center">
                    <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="ph-fill ph-check-circle text-5xl text-green-500"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-brand-black mb-4">Order Confirmed!</h1>
                    <p class="text-gray-500 mb-2">Thank you for your purchase</p>
                    <p class="text-gray-400 mb-8">Order #<span id="order-number">UT2026001</span></p>
                    <button onclick="navigateTo('home')" class="bg-brand-orange text-white px-8 py-3 rounded-full font-semibold hover:bg-brand-darkOrange transition-colors">
                        Continue Shopping
                    </button>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-brand-black text-white pt-16 pb-8 px-4 sm:px-6">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">
                    <div class="space-y-4">
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 bg-brand-orange rounded-lg flex items-center justify-center text-white">
                                <i class="ph-bold ph-coat-hanger text-lg"></i>
                            </div>
                            <span class="text-lg font-bold tracking-tight">Urban Threads</span>
                        </div>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Your premier destination for modern, minimal fashion. We bring style and comfort to your doorstep.
                        </p>
                        <div class="flex gap-4 pt-2">
                            <a href="#" class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-brand-orange transition-colors"><i class="ph-fill ph-facebook-logo text-lg"></i></a>
                            <a href="#" class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-brand-orange transition-colors"><i class="ph-fill ph-instagram-logo text-lg"></i></a>
                            <a href="https://wa.me/923141134217" target="_blank" class="w-10 h-10 rounded-full bg-green-600 flex items-center justify-center hover:bg-green-500 transition-colors"><i class="ph-fill ph-whatsapp-logo text-lg"></i></a>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-bold text-lg mb-6">Shop</h4>
                        <ul class="space-y-3 text-gray-400 text-sm">
                            <li><a href="#" onclick="navigateTo('men')" class="hover:text-brand-orange transition-colors">Men's Collection</a></li>
                            <li><a href="#" onclick="navigateTo('women')" class="hover:text-brand-orange transition-colors">Women's Collection</a></li>
                            <li><a href="#" onclick="navigateTo('latest')" class="hover:text-brand-orange transition-colors">New Arrivals</a></li>
                            <li><a href="#" onclick="navigateTo('sale')" class="hover:text-brand-orange transition-colors">Sale</a></li>
                        </ul>
                    </div>

                    <div>
                        <h4 class="font-bold text-lg mb-6">Support</h4>
                        <ul class="space-y-3 text-gray-400 text-sm">
                            <li><a href="#" class="hover:text-brand-orange transition-colors">Help Center</a></li>
                            <li><a href="#" class="hover:text-brand-orange transition-colors">Shipping Info</a></li>
                            <li><a href="#" class="hover:text-brand-orange transition-colors">Returns & Exchanges</a></li>
                            <li><a href="https://wa.me/923141134217" target="_blank" class="hover:text-brand-orange transition-colors flex items-center gap-2"><i class="ph-fill ph-whatsapp-logo"></i> Contact Us</a></li>
                        </ul>
                    </div>

                    <div>
                        <h4 class="font-bold text-lg mb-6">Stay Updated</h4>
                        <p class="text-gray-400 text-sm mb-4">Subscribe to our newsletter for the latest drops.</p>
                        <form onsubmit="handleNewsletter(event)" class="flex flex-col gap-3">
                            <input type="email" id="newsletter-email" placeholder="Enter your email" required class="bg-gray-800 border-none rounded-lg px-4 py-3 text-sm text-white focus:ring-2 focus:ring-brand-orange outline-none">
                            <button type="submit" class="bg-brand-orange text-white text-sm font-bold py-3 rounded-lg hover:bg-brand-darkOrange transition-colors">Subscribe</button>
                        </form>
                    </div>
                </div>

                <div class="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                    <p class="text-gray-500 text-xs">© 2026 Urban Threads. All rights reserved.</p>
                    <div class="flex items-center gap-3">
                        <div class="bg-white px-3 py-1 rounded text-black text-xs font-bold">VISA</div>
                        <div class="bg-white px-3 py-1 rounded text-black text-xs font-bold">Mastercard</div>
                        <div class="bg-blue-600 px-3 py-1 rounded text-white text-xs font-bold italic">PayPal</div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-4 right-4 z-[100] flex flex-col gap-2"></div>

    <!-- Quick View Modal -->
    <div id="quick-view-modal" class="modal fixed inset-0 bg-black/50 z-[60] items-center justify-center p-4">
        <div class="bg-white rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto" id="quick-view-content"></div>
    </div>



    <!-- Size Guide Modal -->
    <div id="size-guide-modal" class="modal fixed inset-0 bg-black/50 z-[60] items-center justify-center p-4">
        <div class="bg-white rounded-3xl max-w-2xl w-full p-8 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Size Guide</h3>
                <button onclick="closeSizeGuide()" class="w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center">
                    <i class="ph ph-x text-xl"></i>
                </button>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b">
                            <th class="py-3 px-4 text-left">Size</th>
                            <th class="py-3 px-4 text-left">Chest (in)</th>
                            <th class="py-3 px-4 text-left">Waist (in)</th>
                            <th class="py-3 px-4 text-left">Hips (in)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b"><td class="py-3 px-4 font-medium">XS</td><td class="py-3 px-4">32-34</td><td class="py-3 px-4">26-28</td><td class="py-3 px-4">34-36</td></tr>
                        <tr class="border-b"><td class="py-3 px-4 font-medium">S</td><td class="py-3 px-4">34-36</td><td class="py-3 px-4">28-30</td><td class="py-3 px-4">36-38</td></tr>
                        <tr class="border-b"><td class="py-3 px-4 font-medium">M</td><td class="py-3 px-4">38-40</td><td class="py-3 px-4">32-34</td><td class="py-3 px-4">40-42</td></tr>
                        <tr class="border-b"><td class="py-3 px-4 font-medium">L</td><td class="py-3 px-4">42-44</td><td class="py-3 px-4">36-38</td><td class="py-3 px-4">44-46</td></tr>
                        <tr><td class="py-3 px-4 font-medium">XL</td><td class="py-3 px-4">46-48</td><td class="py-3 px-4">40-42</td><td class="py-3 px-4">48-50</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/923141134217" target="_blank" class="fixed bottom-6 right-6 z-50 w-14 h-14 whatsapp-btn rounded-full flex items-center justify-center shadow-lg shadow-green-300 hover:scale-110 transition-transform">
        <i class="ph-fill ph-whatsapp-logo text-white text-3xl"></i>
    </a>

    <script>
        // WhatsApp Number
        const WHATSAPP_NUMBER = '923141134217';

        // ============ DATA ============
        const products = [
            // Men's Products
            { id: 1, name: "Classic Oxford Shirt", price: 89, originalPrice: null, category: "men", subcategory: "shirts", image: "https://images.unsplash.com/photo-1602810318383-e386cc2a3ccf?w=800", rating: 4.8, reviews: 234, sizes: ["S", "M", "L", "XL"], colors: ["White", "Blue", "Black"], description: "A timeless oxford shirt crafted from premium cotton. Perfect for both casual and formal occasions.", isNew: true, isSale: false, sold: 1250 },
            { id: 2, name: "Slim Fit Chinos", price: 75, originalPrice: null, category: "men", subcategory: "pants", image: "https://images.unsplash.com/photo-1473966968600-fa801b869a1a?w=800", rating: 4.6, reviews: 189, sizes: ["30", "32", "34", "36"], colors: ["Khaki", "Navy", "Black"], description: "Modern slim-fit chinos with stretch fabric for all-day comfort.", isNew: false, isSale: false, sold: 890 },
            { id: 3, name: "Leather Bomber Jacket", price: 299, originalPrice: 399, category: "men", subcategory: "jackets", image: "https://images.unsplash.com/photo-1551028719-00167b16eac5?w=800", rating: 4.9, reviews: 456, sizes: ["S", "M", "L", "XL"], colors: ["Black", "Brown"], description: "Premium leather bomber jacket with quilted lining. A wardrobe essential.", isNew: false, isSale: true, sold: 567 },
            { id: 4, name: "Cotton Crew Neck Tee", price: 35, originalPrice: null, category: "men", subcategory: "t-shirts", image: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=800", rating: 4.5, reviews: 892, sizes: ["XS", "S", "M", "L", "XL"], colors: ["White", "Black", "Gray", "Navy"], description: "Essential crew neck tee made from 100% organic cotton.", isNew: false, isSale: false, sold: 2340 },
            { id: 5, name: "Wool Blend Overcoat", price: 350, originalPrice: 450, category: "men", subcategory: "jackets", image: "https://images.unsplash.com/photo-1544022613-e87ca1920295?w=800", rating: 4.7, reviews: 123, sizes: ["S", "M", "L", "XL"], colors: ["Charcoal", "Camel", "Navy"], description: "Elegant wool blend overcoat for sophisticated winter style.", isNew: true, isSale: true, sold: 234 },
            { id: 6, name: "Denim Trucker Jacket", price: 129, originalPrice: null, category: "men", subcategory: "jackets", image: "https://images.unsplash.com/photo-1576995853123-5a10305d93c0?w=800", rating: 4.6, reviews: 345, sizes: ["S", "M", "L", "XL"], colors: ["Light Blue", "Dark Blue", "Black"], description: "Classic trucker jacket in premium Japanese denim.", isNew: true, isSale: false, sold: 678 },
            { id: 7, name: "Merino Wool Sweater", price: 120, originalPrice: null, category: "men", subcategory: "sweaters", image: "https://images.unsplash.com/photo-1638629424470-27f76a041dea?w=800", rating: 4.8, reviews: 267, sizes: ["S", "M", "L", "XL"], colors: ["Burgundy", "Forest Green", "Navy"], description: "Luxuriously soft merino wool sweater for ultimate comfort.", isNew: false, isSale: false, sold: 456 },
            { id: 8, name: "Cargo Joggers", price: 85, originalPrice: 110, category: "men", subcategory: "pants", image: "https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?w=800", rating: 4.4, reviews: 178, sizes: ["S", "M", "L", "XL"], colors: ["Black", "Olive", "Gray"], description: "Versatile cargo joggers with multiple pockets and tapered fit.", isNew: false, isSale: true, sold: 789 },
            
            // Women's Products
            { id: 9, name: "Silk Wrap Dress", price: 195, originalPrice: null, category: "women", subcategory: "dresses", image: "https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=800", rating: 4.9, reviews: 567, sizes: ["XS", "S", "M", "L"], colors: ["Blush", "Navy", "Emerald"], description: "Elegant silk wrap dress that flatters every figure.", isNew: true, isSale: false, sold: 890 },
            { id: 10, name: "High-Waist Wide Leg Pants", price: 110, originalPrice: null, category: "women", subcategory: "pants", image: "https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=800", rating: 4.7, reviews: 234, sizes: ["XS", "S", "M", "L", "XL"], colors: ["Black", "Cream", "Tan"], description: "Sophisticated wide-leg pants with a flattering high waist.", isNew: false, isSale: false, sold: 567 },
            { id: 11, name: "Cashmere Cardigan", price: 225, originalPrice: 295, category: "women", subcategory: "sweaters", image: "https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=800", rating: 4.8, reviews: 389, sizes: ["XS", "S", "M", "L"], colors: ["Oatmeal", "Blush", "Gray"], description: "Luxurious cashmere cardigan for effortless elegance.", isNew: false, isSale: true, sold: 345 },
            { id: 12, name: "Pleated Midi Skirt", price: 95, originalPrice: null, category: "women", subcategory: "skirts", image: "https://images.unsplash.com/photo-1583496661160-fb5886a0uj9e?w=800", rating: 4.6, reviews: 178, sizes: ["XS", "S", "M", "L"], colors: ["Black", "Burgundy", "Forest Green"], description: "Flowing pleated midi skirt perfect for any occasion.", isNew: true, isSale: false, sold: 234 },
            { id: 13, name: "Oversized Blazer", price: 175, originalPrice: null, category: "women", subcategory: "jackets", image: "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=800", rating: 4.7, reviews: 456, sizes: ["XS", "S", "M", "L"], colors: ["Black", "Camel", "Gray"], description: "Modern oversized blazer for a powerful, chic look.", isNew: false, isSale: false, sold: 678 },
            { id: 14, name: "Satin Camisole", price: 65, originalPrice: 85, category: "women", subcategory: "tops", image: "https://images.unsplash.com/photo-1564257631407-4deb1f99d992?w=800", rating: 4.5, reviews: 234, sizes: ["XS", "S", "M", "L"], colors: ["Champagne", "Black", "Dusty Rose"], description: "Delicate satin camisole for layering or solo wear.", isNew: false, isSale: true, sold: 456 },
            { id: 15, name: "Tailored Wool Coat", price: 320, originalPrice: 420, category: "women", subcategory: "jackets", image: "https://images.unsplash.com/photo-1539008835657-9e8e9680c956?w=800", rating: 4.9, reviews: 678, sizes: ["XS", "S", "M", "L", "XL"], colors: ["Camel", "Black", "Burgundy"], description: "Impeccably tailored wool coat for timeless winter style.", isNew: true, isSale: true, sold: 890 },
            { id: 16, name: "Floral Maxi Dress", price: 145, originalPrice: null, category: "women", subcategory: "dresses", image: "https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?w=800", rating: 4.6, reviews: 345, sizes: ["XS", "S", "M", "L"], colors: ["Blue Floral", "Pink Floral"], description: "Romantic floral maxi dress for summer elegance.", isNew: true, isSale: false, sold: 567 },
            { id: 17, name: "Ribbed Turtleneck", price: 75, originalPrice: null, category: "women", subcategory: "sweaters", image: "https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=800", rating: 4.7, reviews: 289, sizes: ["XS", "S", "M", "L", "XL"], colors: ["Cream", "Black", "Terracotta"], description: "Classic ribbed turtleneck for cozy sophistication.", isNew: false, isSale: false, sold: 789 },
            { id: 18, name: "Leather Mini Skirt", price: 135, originalPrice: 175, category: "women", subcategory: "skirts", image: "https://images.unsplash.com/photo-1548863227-3af567e9597f?w=800", rating: 4.5, reviews: 167, sizes: ["XS", "S", "M", "L"], colors: ["Black", "Brown"], description: "Edgy leather mini skirt for bold fashion statements.", isNew: false, isSale: true, sold: 345 },
            { id: 19, name: "Cropped Denim Jacket", price: 99, originalPrice: null, category: "women", subcategory: "jackets", image: "https://images.unsplash.com/photo-1578587018452-892bacefd3f2?w=800", rating: 4.6, reviews: 456, sizes: ["XS", "S", "M", "L"], colors: ["Light Wash", "Medium Wash", "Black"], description: "Trendy cropped denim jacket for casual layering.", isNew: true, isSale: false, sold: 678 },
            { id: 20, name: "Linen Blend Trousers", price: 95, originalPrice: null, category: "women", subcategory: "pants", image: "https://images.unsplash.com/photo-1506629082955-511b1aa562c8?w=800", rating: 4.7, reviews: 234, sizes: ["XS", "S", "M", "L", "XL"], colors: ["White", "Beige", "Black"], description: "Breezy linen blend trousers for effortless summer style.", isNew: false, isSale: false, sold: 456 }
        ];

        const categories = [
            { name: "T-Shirts", icon: "ph-fill ph-t-shirt", filter: "t-shirts" },
            { name: "Shirts", icon: "ph-fill ph-shirt-folded", filter: "shirts" },
            { name: "Jackets", icon: "ph-fill ph-coat-hanger", filter: "jackets" },
            { name: "Pants", icon: "ph-fill ph-pants", filter: "pants" },
            { name: "Dresses", icon: "ph-fill ph-dress", filter: "dresses" },
            { name: "Sweaters", icon: "ph-fill ph-hoodie", filter: "sweaters" }
        ];

        // ============ STATE ============
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let currentPage = 'home';
        let currentFilters = { men: 'all', women: 'all' };

        // ============ WHATSAPP FUNCTIONS ============
        function openWhatsAppChat() {
            window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=Hi! I'm interested in your products at Urban Threads.`, '_blank');
        }

        function buyNowWhatsApp(productId, size = null, color = null) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            let message = `Hi! I want to buy:\n\n`;
            message += `*${product.name}*\n`;
            message += `Price: $${product.price.toFixed(2)}\n`;
            if (size) message += `Size: ${size}\n`;
            if (color) message += `Color: ${color}\n`;
            message += `\nPlease confirm availability and proceed with my order. Thank you!`;
            
            window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`, '_blank');
        }

        function buyCartWhatsApp() {
            if (cart.length === 0) {
                showToast('Your cart is empty', 'error');
                return;
            }
            
            let message = `Hi! I want to order the following items:\n\n`;
            let total = 0;
            
            cart.forEach((item, index) => {
                const product = products.find(p => p.id === item.id);
                const itemTotal = product.price * item.quantity;
                total += itemTotal;
                message += `${index + 1}. *${product.name}*\n`;
                message += `   Size: ${item.size} | Color: ${item.color}\n`;
                message += `   Qty: ${item.quantity} × $${product.price.toFixed(2)} = $${itemTotal.toFixed(2)}\n\n`;
            });
            
            message += `*Total: $${total.toFixed(2)}*\n\n`;
            message += `Please confirm my order and share payment details. Thank you!`;
            
            window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`, '_blank');
        }

        // ============ INITIALIZATION ============
        document.addEventListener('DOMContentLoaded', () => {
            renderCategoryIcons();
            renderPopularProducts();
            renderFeaturedProduct();
            renderRecommendedProducts();
            updateCartCount();
            updateWishlistCount();
            updateAuthLink();
            startCountdown();
            
            window.addEventListener('popstate', (e) => {
                if (e.state && e.state.page) {
                    showPage(e.state.page, false);
                }
            });
        });

        // ============ NAVIGATION ============
        function navigateTo(page, productId = null) {
            event?.preventDefault();
            showPage(page, true, productId);
        }

        function showPage(page, pushState = true, productId = null) {
            currentPage = page;
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(`page-${page}`).classList.add('active');
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('text-brand-black', 'font-semibold', 'border-b-2', 'border-brand-orange');
                link.classList.add('text-gray-500');
                if (link.dataset.page === page) {
                    link.classList.remove('text-gray-500');
                    link.classList.add('text-brand-black', 'font-semibold', 'border-b-2', 'border-brand-orange');
                }
            });

            switch(page) {
                case 'latest': renderLatestProducts(); break;
                case 'men': renderMenProducts(); break;
                case 'women': renderWomenProducts(); break;
                case 'sale': renderSaleProducts(); break;
                case 'product': renderProductDetail(productId); break;
                case 'cart': renderCart(); break;
                case 'wishlist': renderWishlistPage(); break;
                case 'checkout': renderCheckout(); break;
            }

            window.scrollTo({ top: 0, behavior: 'smooth' });

            if (pushState) {
                const url = productId ? `#${page}/${productId}` : `#${page}`;
                history.pushState({ page, productId }, '', url);
            }
        }

        // ============ RENDER FUNCTIONS ============
        function renderCategoryIcons() {
            const container = document.getElementById('category-icons');
            container.innerHTML = categories.map(cat => `
                <a href="#" onclick="filterByCategory('${cat.filter}')" class="group flex flex-col items-center gap-3">
                    <div class="w-full aspect-square bg-brand-black rounded-2xl flex items-center justify-center text-white transition-transform group-hover:-translate-y-2 duration-300 shadow-lg">
                        <i class="${cat.icon} text-3xl sm:text-4xl"></i>
                    </div>
                    <span class="font-medium text-brand-black text-xs sm:text-sm group-hover:text-brand-orange transition-colors">${cat.name}</span>
                </a>
            `).join('');
        }

        function renderProductCard(product, showSale = true) {
            const isInWishlist = wishlist.includes(product.id);
            return `
                <div class="group bg-white rounded-3xl overflow-hidden shadow-sm hover:shadow-xl transition-shadow duration-300 border border-gray-100">
                    <div class="relative overflow-hidden aspect-[3/4] cursor-pointer" onclick="navigateTo('product', ${product.id})">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                        ${product.isNew ? '<span class="absolute top-4 left-4 bg-brand-black text-white text-xs font-bold px-3 py-1 rounded-full">NEW</span>' : ''}
                        ${product.isSale && showSale ? '<span class="absolute top-4 left-4 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full">SALE</span>' : ''}
                        <button onclick="event.stopPropagation(); toggleWishlistItem(${product.id})" class="absolute top-4 right-4 ${isInWishlist ? 'bg-red-500 text-white' : 'bg-white text-brand-black'} w-10 h-10 rounded-full shadow-md flex items-center justify-center hover:scale-110 transition-all">
                            <i class="ph${isInWishlist ? '-fill' : ''} ph-heart text-lg"></i>
                        </button>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex-1 cursor-pointer" onclick="navigateTo('product', ${product.id})">
                                <h3 class="font-semibold text-brand-black hover:text-brand-orange transition-colors">${product.name}</h3>
                                <div class="flex items-center gap-1 mt-1">
                                    <i class="ph-fill ph-star text-yellow-400 text-sm"></i>
                                    <span class="text-sm text-gray-500">${product.rating} (${product.reviews})</span>
                                </div>
                            </div>
                            <div class="text-right">
                                ${product.originalPrice ? `<span class="text-gray-400 line-through text-sm block">$${product.originalPrice.toFixed(2)}</span>` : ''}
                                <p class="text-brand-orange font-bold text-lg">$${product.price.toFixed(2)}</p>
                            </div>
                        </div>
                        <div class="flex gap-2 mt-4">
                            <button onclick="event.stopPropagation(); quickAddToCart(${product.id})" class="flex-1 bg-[#ff7b3a] hover:bg-[#e06a30] text-white py-3 rounded-full font-semibold text-sm transition-colors flex items-center justify-center gap-2">
                                <i class="ph ph-shopping-cart text-lg"></i>
                                <span class="text-white">Add to Cart</span>
                            </button>
                            <button onclick="event.stopPropagation(); buyNowWhatsApp(${product.id}, '${product.sizes[0]}', '${product.colors[0]}')" class="flex-1 bg-[#25D366] hover:bg-[#128C7E] text-white py-3 rounded-full font-semibold text-sm transition-colors flex items-center justify-center gap-2">
                                <i class="ph-fill ph-whatsapp-logo text-lg"></i>
                                <span class="text-white">Buy Now</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderPopularProducts() {
            const popular = [...products].sort((a, b) => b.sold - a.sold).slice(0, 4);
            document.getElementById('popular-products').innerHTML = popular.map(p => renderProductCard(p)).join('');
        }

        function renderFeaturedProduct() {
            const featured = products.find(p => p.id === 6);
            document.getElementById('featured-product-section').innerHTML = `
                <div class="mb-10">
                    <h2 class="text-3xl md:text-4xl font-bold text-brand-black">New Arrival Clothes</h2>
                    <p class="text-gray-500 mt-2">Check out the latest additions to our exclusive premium collection.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="bg-gray-100 rounded-[2.5rem] overflow-hidden shadow-lg h-[500px] lg:h-[600px] relative cursor-pointer" onclick="navigateTo('product', ${featured.id})">
                        <img src="${featured.image}" alt="${featured.name}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-500">
                        <div class="absolute top-6 left-6 bg-brand-black text-white px-4 py-1 rounded-full text-xs font-bold tracking-wide">FRESH DROP</div>
                    </div>
                    <div class="space-y-6 lg:pl-8">
                        <div>
                            <h3 class="text-3xl md:text-4xl font-bold text-brand-black mb-2">${featured.name}</h3>
                            <div class="flex items-center gap-2 text-sm">
                                <div class="flex text-yellow-400">${'<i class="ph-fill ph-star"></i>'.repeat(5)}</div>
                                <span class="text-gray-500 font-medium">${featured.rating} (${featured.reviews} reviews)</span>
                            </div>
                        </div>
                        <p class="text-gray-600 leading-relaxed text-lg">${featured.description}</p>
                        <ul class="space-y-3">
                            <li class="flex items-center gap-3 text-gray-700"><i class="ph-fill ph-check-circle text-brand-orange text-xl"></i><span>Premium quality materials</span></li>
                            <li class="flex items-center gap-3 text-gray-700"><i class="ph-fill ph-check-circle text-brand-orange text-xl"></i><span>Relaxed modern fit</span></li>
                            <li class="flex items-center gap-3 text-gray-700"><i class="ph-fill ph-check-circle text-brand-orange text-xl"></i><span>Machine washable</span></li>
                        </ul>
                        <div class="pt-4">
                            <span class="block text-sm font-bold text-brand-black mb-3">Select Size</span>
                            <div class="flex gap-3 flex-wrap" id="featured-sizes"></div>
                        </div>
                        <div class="flex flex-col sm:flex-row gap-4 pt-6">
                            <button onclick="addToCart(${featured.id}, document.querySelector('#featured-sizes .selected')?.textContent || '${featured.sizes[0]}')" class="flex-1 bg-[#ff7b3a] hover:bg-[#e06a30] text-white px-8 py-4 rounded-full font-bold text-lg shadow-lg transition-all flex items-center justify-center gap-3">
                                <i class="ph ph-shopping-cart text-xl"></i>
                                <span class="text-white">Add to Cart</span>
                                <span class="text-white opacity-75">$${featured.price.toFixed(2)}</span>
                            </button>
                            <button onclick="buyNowWhatsApp(${featured.id}, document.querySelector('#featured-sizes .selected')?.textContent || '${featured.sizes[0]}', '${featured.colors[0]}')" class="flex-1 bg-[#25D366] hover:bg-[#128C7E] text-white px-8 py-4 rounded-full font-bold text-lg shadow-lg transition-all flex items-center justify-center gap-3">
                                <i class="ph-fill ph-whatsapp-logo text-xl"></i>
                                <span class="text-white">Buy on WhatsApp</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            renderSizeButtons('featured-sizes', featured.sizes, featured.sizes[1]);
        }

        function renderRecommendedProducts() {
            const recommended = [...products].sort(() => Math.random() - 0.5).slice(0, 3);
            document.getElementById('recommended-products').innerHTML = recommended.map(p => `
                <div class="bg-gray-50 rounded-3xl p-4 hover:shadow-lg transition-shadow duration-300">
                    <div class="w-full aspect-[4/3] rounded-2xl overflow-hidden mb-4 bg-white cursor-pointer" onclick="navigateTo('product', ${p.id})">
                        <img src="${p.image}" alt="${p.name}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
                    </div>
                    <h4 class="font-bold text-brand-black cursor-pointer hover:text-brand-orange" onclick="navigateTo('product', ${p.id})">${p.name}</h4>
                    <div class="flex justify-between items-center mt-2 mb-4">
                        <span class="text-xs text-gray-500 bg-white px-2 py-1 rounded-md">${p.sold.toLocaleString()} sold</span>
                        <span class="font-bold text-brand-orange">$${p.price.toFixed(2)}</span>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="quickAddToCart(${p.id})" class="flex-1 bg-[#ff7b3a] hover:bg-[#e06a30] text-white py-2 rounded-full font-semibold text-sm transition-colors flex items-center justify-center gap-1">
                            <i class="ph ph-shopping-cart"></i> <span class="text-white">Add</span>
                        </button>
                        <button onclick="buyNowWhatsApp(${p.id}, '${p.sizes[0]}', '${p.colors[0]}')" class="flex-1 bg-[#25D366] hover:bg-[#128C7E] text-white py-2 rounded-full font-semibold text-sm transition-colors flex items-center justify-center gap-1">
                            <i class="ph-fill ph-whatsapp-logo"></i> <span class="text-white">Buy</span>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function renderLatestProducts() {
            const latest = [...products].filter(p => p.isNew).concat(products.filter(p => !p.isNew)).slice(0, 12);
            document.getElementById('latest-products').innerHTML = latest.map(p => renderProductCard(p)).join('');
        }

        function renderMenProducts() {
            renderFilters('men');
            let filtered = products.filter(p => p.category === 'men');
            if (currentFilters.men !== 'all') {
                filtered = filtered.filter(p => p.subcategory === currentFilters.men);
            }
            document.getElementById('men-products').innerHTML = filtered.length ? 
                filtered.map(p => renderProductCard(p)).join('') :
                '<p class="col-span-full text-center text-gray-500 py-12">No products found</p>';
        }

        function renderWomenProducts() {
            renderFilters('women');
            let filtered = products.filter(p => p.category === 'women');
            if (currentFilters.women !== 'all') {
                filtered = filtered.filter(p => p.subcategory === currentFilters.women);
            }
            document.getElementById('women-products').innerHTML = filtered.length ?
                filtered.map(p => renderProductCard(p)).join('') :
                '<p class="col-span-full text-center text-gray-500 py-12">No products found</p>';
        }

        function renderSaleProducts() {
            const sale = products.filter(p => p.isSale);
            document.getElementById('sale-products').innerHTML = sale.map(p => renderProductCard(p, true)).join('');
        }

        function renderFilters(gender) {
            const subcategories = [...new Set(products.filter(p => p.category === gender).map(p => p.subcategory))];
            document.getElementById(`${gender}-filters`).innerHTML = `
                <button onclick="setFilter('${gender}', 'all')" class="px-4 py-2 rounded-full text-sm font-medium transition-all ${currentFilters[gender] === 'all' ? 'bg-brand-orange text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}">All</button>
                ${subcategories.map(sub => `
                    <button onclick="setFilter('${gender}', '${sub}')" class="px-4 py-2 rounded-full text-sm font-medium transition-all capitalize ${currentFilters[gender] === sub ? 'bg-brand-orange text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}">${sub}</button>
                `).join('')}
            `;
        }

        function setFilter(gender, filter) {
            currentFilters[gender] = filter;
            if (gender === 'men') renderMenProducts();
            else renderWomenProducts();
        }

        function filterByCategory(category) {
            event?.preventDefault();
            const menCategories = ['t-shirts', 'shirts', 'jackets', 'pants', 'sweaters'];
            const womenCategories = ['dresses', 'skirts', 'tops', 'jackets', 'pants', 'sweaters'];
            
            if (menCategories.includes(category)) {
                currentFilters.men = category;
                navigateTo('men');
            } else if (womenCategories.includes(category)) {
                currentFilters.women = category;
                navigateTo('women');
            }
        }

        function sortProducts(page) {
            const sortValue = document.getElementById(`sort-${page}`).value;
            let container, filtered;
            
            switch(page) {
                case 'latest':
                    filtered = [...products];
                    container = document.getElementById('latest-products');
                    break;
                case 'men':
                    filtered = products.filter(p => p.category === 'men');
                    if (currentFilters.men !== 'all') filtered = filtered.filter(p => p.subcategory === currentFilters.men);
                    container = document.getElementById('men-products');
                    break;
                case 'women':
                    filtered = products.filter(p => p.category === 'women');
                    if (currentFilters.women !== 'all') filtered = filtered.filter(p => p.subcategory === currentFilters.women);
                    container = document.getElementById('women-products');
                    break;
            }

            switch(sortValue) {
                case 'price-low': filtered.sort((a, b) => a.price - b.price); break;
                case 'price-high': filtered.sort((a, b) => b.price - a.price); break;
                case 'popular': filtered.sort((a, b) => b.sold - a.sold); break;
                case 'newest': filtered.sort((a, b) => b.isNew - a.isNew); break;
            }

            container.innerHTML = filtered.map(p => renderProductCard(p)).join('');
        }

        function renderProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const isInWishlist = wishlist.includes(product.id);
            document.getElementById('product-detail').innerHTML = `
                <div class="mb-6">
                    <button onclick="history.back()" class="flex items-center gap-2 text-gray-500 hover:text-brand-black transition-colors">
                        <i class="ph ph-arrow-left"></i> Back
                    </button>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    <div class="space-y-4">
                        <div class="bg-gray-100 rounded-3xl overflow-hidden aspect-square">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover" id="main-product-image">
                        </div>
                        <div class="grid grid-cols-4 gap-3">
                            ${[1,2,3,4].map(i => `
                                <div class="bg-gray-100 rounded-xl overflow-hidden aspect-square cursor-pointer hover:ring-2 hover:ring-brand-orange transition-all" onclick="document.getElementById('main-product-image').src='${product.image}'">
                                    <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover">
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="space-y-6">
                        <div>
                            <span class="text-brand-orange text-sm font-semibold uppercase">${product.category}'s ${product.subcategory}</span>
                            <h1 class="text-3xl md:text-4xl font-bold text-brand-black mt-2">${product.name}</h1>
                            <div class="flex items-center gap-4 mt-3">
                                <div class="flex items-center gap-1">
                                    <div class="flex text-yellow-400">${'<i class="ph-fill ph-star"></i>'.repeat(Math.floor(product.rating))}</div>
                                    <span class="font-medium">${product.rating}</span>
                                </div>
                                <span class="text-gray-400">|</span>
                                <span class="text-gray-500">${product.reviews} reviews</span>
                                <span class="text-gray-400">|</span>
                                <span class="text-gray-500">${product.sold.toLocaleString()} sold</span>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <span class="text-3xl font-bold text-brand-black">$${product.price.toFixed(2)}</span>
                            ${product.originalPrice ? `<span class="text-xl text-gray-400 line-through">$${product.originalPrice.toFixed(2)}</span><span class="bg-red-100 text-red-600 px-3 py-1 rounded-full text-sm font-bold">${Math.round((1 - product.price/product.originalPrice) * 100)}% OFF</span>` : ''}
                        </div>
                        <p class="text-gray-600 leading-relaxed">${product.description}</p>
                        <div>
                            <div class="flex items-center justify-between mb-3">
                                <span class="font-bold text-brand-black">Select Size</span>
                                <button onclick="openSizeGuide()" class="text-brand-orange text-sm hover:underline">Size Guide</button>
                            </div>
                            <div class="flex gap-3 flex-wrap" id="product-sizes"></div>
                        </div>
                        <div>
                            <span class="font-bold text-brand-black block mb-3">Select Color</span>
                            <div class="flex gap-3 flex-wrap" id="product-colors"></div>
                        </div>
                        <div>
                            <span class="font-bold text-brand-black block mb-3">Quantity</span>
                            <div class="flex items-center gap-4">
                                <button onclick="updateQuantity(-1)" class="w-10 h-10 rounded-full border border-gray-200 flex items-center justify-center hover:bg-gray-50"><i class="ph ph-minus"></i></button>
                                <span id="product-quantity" class="text-xl font-bold w-8 text-center">1</span>
                                <button onclick="updateQuantity(1)" class="w-10 h-10 rounded-full border border-gray-200 flex items-center justify-center hover:bg-gray-50"><i class="ph ph-plus"></i></button>
                            </div>
                        </div>
                        <div class="flex flex-col sm:flex-row gap-4 pt-4">
                            <button onclick="addToCartFromDetail(${product.id})" class="flex-1 bg-[#ff7b3a] hover:bg-[#e06a30] text-white py-4 rounded-full font-bold text-lg shadow-lg transition-all flex items-center justify-center gap-2">
                                <i class="ph ph-shopping-cart text-xl"></i> <span class="text-white">Add to Cart</span>
                            </button>
                            <button onclick="buyNowFromDetail(${product.id})" class="flex-1 bg-[#25D366] hover:bg-[#128C7E] text-white py-4 rounded-full font-bold text-lg shadow-lg transition-all flex items-center justify-center gap-2">
                                <i class="ph-fill ph-whatsapp-logo text-xl"></i> <span class="text-white">Buy on WhatsApp</span>
                            </button>
                        </div>
                        <div class="flex justify-center">
                            <button onclick="toggleWishlistItem(${product.id})" class="flex items-center gap-2 text-gray-500 hover:text-red-500 transition-colors ${isInWishlist ? 'text-red-500' : ''}">
                                <i class="ph${isInWishlist ? '-fill' : ''} ph-heart text-xl"></i>
                                <span>${isInWishlist ? 'Remove from Wishlist' : 'Add to Wishlist'}</span>
                            </button>
                        </div>
                        <div class="border-t border-gray-100 pt-6 space-y-3">
                            <div class="flex items-center gap-3 text-gray-600"><i class="ph ph-truck text-xl text-brand-orange"></i><span>Free shipping on orders over $100</span></div>
                            <div class="flex items-center gap-3 text-gray-600"><i class="ph ph-arrow-counter-clockwise text-xl text-brand-orange"></i><span>30-day easy returns</span></div>
                            <div class="flex items-center gap-3 text-gray-600"><i class="ph ph-shield-check text-xl text-brand-orange"></i><span>2-year warranty</span></div>
                        </div>
                    </div>
                </div>
                <div class="mt-16">
                    <h3 class="text-2xl font-bold text-brand-black mb-8">You May Also Like</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="related-products"></div>
                </div>
            `;
            
            renderSizeButtons('product-sizes', product.sizes, product.sizes[0]);
            renderColorButtons('product-colors', product.colors, product.colors[0]);
            renderRelatedProducts(product);
        }

        function buyNowFromDetail(productId) {
            const size = document.querySelector('#product-sizes .selected')?.textContent;
            const color = document.querySelector('#product-colors .selected')?.textContent;
            
            if (!size) {
                showToast('Please select a size', 'error');
                return;
            }
            
            buyNowWhatsApp(productId, size, color);
        }

        function renderSizeButtons(containerId, sizes, selected) {
            document.getElementById(containerId).innerHTML = sizes.map(size => `
                <button onclick="selectSize(this, '${containerId}')" class="min-w-12 h-10 px-4 rounded-full border ${size === selected ? 'bg-brand-orange text-white border-brand-orange selected' : 'border-gray-200 hover:border-brand-black'} text-sm font-medium transition-all">${size}</button>
            `).join('');
        }

        function renderColorButtons(containerId, colors, selected) {
            document.getElementById(containerId).innerHTML = colors.map(color => `
                <button onclick="selectColor(this, '${containerId}')" class="px-4 py-2 rounded-full border ${color === selected ? 'bg-brand-black text-white border-brand-black selected' : 'border-gray-200 hover:border-brand-black'} text-sm font-medium transition-all">${color}</button>
            `).join('');
        }

        function selectSize(btn, containerId) {
            document.querySelectorAll(`#${containerId} button`).forEach(b => {
                b.classList.remove('bg-brand-orange', 'text-white', 'border-brand-orange', 'selected');
                b.classList.add('border-gray-200');
            });
            btn.classList.add('bg-brand-orange', 'text-white', 'border-brand-orange', 'selected');
            btn.classList.remove('border-gray-200');
        }

        function selectColor(btn, containerId) {
            document.querySelectorAll(`#${containerId} button`).forEach(b => {
                b.classList.remove('bg-brand-black', 'text-white', 'border-brand-black', 'selected');
                b.classList.add('border-gray-200');
            });
            btn.classList.add('bg-brand-black', 'text-white', 'border-brand-black', 'selected');
            btn.classList.remove('border-gray-200');
        }

        function renderRelatedProducts(currentProduct) {
            const related = products.filter(p => p.category === currentProduct.category && p.id !== currentProduct.id).slice(0, 4);
            document.getElementById('related-products').innerHTML = related.map(p => renderProductCard(p)).join('');
        }

        let productQuantity = 1;
        function updateQuantity(delta) {
            productQuantity = Math.max(1, Math.min(10, productQuantity + delta));
            document.getElementById('product-quantity').textContent = productQuantity;
        }

        // ============ CART FUNCTIONS ============
        function addToCart(productId, size, color = null, quantity = 1) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const existingItem = cart.find(item => item.id === productId && item.size === size && item.color === color);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({ id: productId, size, color: color || product.colors[0], quantity });
            }

            saveCart();
            updateCartCount();
            showToast(`${product.name} added to cart!`, 'success');
        }

        function quickAddToCart(productId) {
            const product = products.find(p => p.id === productId);
            addToCart(productId, product.sizes[0], product.colors[0], 1);
        }

        function addToCartFromDetail(productId) {
            const size = document.querySelector('#product-sizes .selected')?.textContent;
            const color = document.querySelector('#product-colors .selected')?.textContent;
            const quantity = parseInt(document.getElementById('product-quantity').textContent);
            
            if (!size) {
                showToast('Please select a size', 'error');
                return;
            }
            
            addToCart(productId, size, color, quantity);
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            saveCart();
            updateCartCount();
            renderCart();
        }

        function updateCartItemQuantity(index, delta) {
            cart[index].quantity = Math.max(1, cart[index].quantity + delta);
            saveCart();
            updateCartCount();
            renderCart();
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            const countEl = document.getElementById('cart-count');
            if (count > 0) {
                countEl.textContent = count;
                countEl.classList.remove('hidden');
                countEl.classList.add('flex');
            } else {
                countEl.classList.add('hidden');
                countEl.classList.remove('flex');
            }
        }

        function toggleCart() {
            navigateTo('cart');
        }

        function renderCart() {
            const itemsContainer = document.getElementById('cart-items');
            const summaryContainer = document.getElementById('cart-summary');

            if (cart.length === 0) {
                itemsContainer.innerHTML = `
                    <div class="text-center py-16">
                        <i class="ph ph-shopping-bag text-6xl text-gray-300 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-500">Your cart is empty</h3>
                        <p class="text-gray-400 mb-6">Looks like you haven't added anything yet</p>
                        <button onclick="navigateTo('latest')" class="bg-brand-orange text-white px-6 py-3 rounded-full font-semibold hover:bg-brand-darkOrange transition-colors">Start Shopping</button>
                    </div>
                `;
                summaryContainer.innerHTML = '';
                return;
            }

            itemsContainer.innerHTML = cart.map((item, index) => {
                const product = products.find(p => p.id === item.id);
                return `
                    <div class="flex gap-4 p-4 bg-gray-50 rounded-2xl mb-4">
                        <div class="w-24 h-24 rounded-xl overflow-hidden bg-white flex-shrink-0 cursor-pointer" onclick="navigateTo('product', ${product.id})">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between">
                                <h4 class="font-semibold text-brand-black cursor-pointer hover:text-brand-orange" onclick="navigateTo('product', ${product.id})">${product.name}</h4>
                                <button onclick="removeFromCart(${index})" class="text-gray-400 hover:text-red-500 transition-colors">
                                    <i class="ph ph-trash text-lg"></i>
                                </button>
                            </div>
                            <p class="text-sm text-gray-500">Size: ${item.size} | Color: ${item.color}</p>
                            <div class="flex justify-between items-center mt-3">
                                <div class="flex items-center gap-2">
                                    <button onclick="updateCartItemQuantity(${index}, -1)" class="w-8 h-8 rounded-full bg-white border border-gray-200 flex items-center justify-center hover:bg-gray-100"><i class="ph ph-minus text-sm"></i></button>
                                    <span class="font-medium w-6 text-center">${item.quantity}</span>
                                    <button onclick="updateCartItemQuantity(${index}, 1)" class="w-8 h-8 rounded-full bg-white border border-gray-200 flex items-center justify-center hover:bg-gray-100"><i class="ph ph-plus text-sm"></i></button>
                                </div>
                                <span class="font-bold text-brand-orange">$${(product.price * item.quantity).toFixed(2)}</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            const subtotal = cart.reduce((sum, item) => {
                const product = products.find(p => p.id === item.id);
                return sum + (product.price * item.quantity);
            }, 0);
            const shipping = subtotal >= 100 ? 0 : 10;
            const total = subtotal + shipping;

            summaryContainer.innerHTML = `
                <h3 class="text-lg font-bold text-brand-black mb-6">Order Summary</h3>
                <div class="space-y-3 mb-6">
                    <div class="flex justify-between text-gray-600"><span>Subtotal</span><span>$${subtotal.toFixed(2)}</span></div>
                    <div class="flex justify-between text-gray-600"><span>Shipping</span><span>${shipping === 0 ? 'FREE' : '$' + shipping.toFixed(2)}</span></div>
                    ${subtotal < 100 ? `<p class="text-xs text-brand-orange">Add $${(100 - subtotal).toFixed(2)} more for free shipping!</p>` : ''}
                </div>
                <div class="border-t border-gray-200 pt-4 mb-6">
                    <div class="flex justify-between text-xl font-bold"><span>Total</span><span>$${total.toFixed(2)}</span></div>
                </div>
                <div class="space-y-3">
                    <button onclick="buyCartWhatsApp()" class="w-full bg-[#25D366] hover:bg-[#128C7E] text-white py-4 rounded-full font-bold text-lg shadow-lg transition-all flex items-center justify-center gap-3">
                        <i class="ph-fill ph-whatsapp-logo text-2xl"></i>
                        <span class="text-white">Buy Now on WhatsApp</span>
                    </button>
                    <p class="text-center text-xs text-gray-500">Complete your order via WhatsApp for fast checkout</p>
                </div>
            `;
        }

        // ============ WISHLIST FUNCTIONS ============
        function toggleWishlistItem(productId) {
            const index = wishlist.indexOf(productId);
            if (index > -1) {
                wishlist.splice(index, 1);
                showToast('Removed from wishlist', 'info');
            } else {
                wishlist.push(productId);
                showToast('Added to wishlist!', 'success');
            }
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
            updateWishlistCount();
            
            if (currentPage === 'wishlist') renderWishlistPage();
            else if (currentPage === 'product') {
                const urlParts = location.hash.split('/');
                if (urlParts[1]) renderProductDetail(parseInt(urlParts[1]));
            }
            // Re-render products on current page
            if (currentPage === 'home') {
                renderPopularProducts();
                renderRecommendedProducts();
            } else if (currentPage === 'latest') {
                renderLatestProducts();
            } else if (currentPage === 'men') {
                renderMenProducts();
            } else if (currentPage === 'women') {
                renderWomenProducts();
            } else if (currentPage === 'sale') {
                renderSaleProducts();
            }
        }

        function updateWishlistCount() {
            const countEl = document.getElementById('wishlist-count');
            if (wishlist.length > 0) {
                countEl.textContent = wishlist.length;
                countEl.classList.remove('hidden');
                countEl.classList.add('flex');
            } else {
                countEl.classList.add('hidden');
                countEl.classList.remove('flex');
            }
        }

        function toggleWishlist() {
            navigateTo('wishlist');
        }

        function renderWishlistPage() {
            const container = document.getElementById('wishlist-items');
            if (wishlist.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-16">
                        <i class="ph ph-heart text-6xl text-gray-300 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-500">Your wishlist is empty</h3>
                        <p class="text-gray-400 mb-6">Save items you love for later</p>
                        <button onclick="navigateTo('latest')" class="bg-brand-orange text-white px-6 py-3 rounded-full font-semibold hover:bg-brand-darkOrange transition-colors">Explore Products</button>
                    </div>
                `;
                return;
            }

            const wishlistProducts = products.filter(p => wishlist.includes(p.id));
            container.innerHTML = wishlistProducts.map(p => renderProductCard(p)).join('');
        }

        // ============ CHECKOUT FUNCTIONS ============
        function renderCheckout() {
            if (cart.length === 0) {
                navigateTo('cart');
                return;
            }

            const subtotal = cart.reduce((sum, item) => {
                const product = products.find(p => p.id === item.id);
                return sum + (product.price * item.quantity);
            }, 0);
            const shipping = subtotal >= 100 ? 0 : 10;
            const total = subtotal + shipping;

            document.getElementById('checkout-content').innerHTML = `
                <div class="space-y-6">
                    <div class="bg-gray-50 rounded-2xl p-6">
                        <h3 class="font-bold text-lg mb-4">Contact Information</h3>
                        <input type="email" placeholder="Email address" required class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange mb-3">
                        <input type="tel" placeholder="Phone number" class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                    </div>
                    <div class="bg-gray-50 rounded-2xl p-6">
                        <h3 class="font-bold text-lg mb-4">Shipping Address</h3>
                        <div class="grid grid-cols-2 gap-3">
                            <input type="text" placeholder="First name" required class="px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                            <input type="text" placeholder="Last name" required class="px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                        </div>
                        <input type="text" placeholder="Address" required class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange mt-3">
                        <input type="text" placeholder="Apartment, suite, etc. (optional)" class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange mt-3">
                        <div class="grid grid-cols-3 gap-3 mt-3">
                            <input type="text" placeholder="City" required class="px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                            <input type="text" placeholder="State" required class="px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                            <input type="text" placeholder="ZIP" required class="px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                        </div>
                    </div>
                    <button onclick="buyCartWhatsApp()" class="w-full bg-[#25D366] hover:bg-[#128C7E] text-white py-4 rounded-full font-bold text-lg shadow-lg transition-colors flex items-center justify-center gap-3">
                        <i class="ph-fill ph-whatsapp-logo text-2xl"></i>
                        <span class="text-white">Complete Order on WhatsApp</span>
                    </button>
                </div>
                <div class="bg-gray-50 rounded-2xl p-6 h-fit">
                    <h3 class="font-bold text-lg mb-4">Order Summary</h3>
                    <div class="space-y-4 mb-6">
                        ${cart.map(item => {
                            const product = products.find(p => p.id === item.id);
                            return `
                                <div class="flex gap-3">
                                    <div class="relative">
                                        <div class="w-16 h-16 rounded-lg overflow-hidden bg-white">
                                            <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover">
                                        </div>
                                        <span class="absolute -top-2 -right-2 w-5 h-5 bg-gray-500 text-white text-xs rounded-full flex items-center justify-center">${item.quantity}</span>
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-medium text-sm">${product.name}</h4>
                                        <p class="text-xs text-gray-500">${item.size} / ${item.color}</p>
                                    </div>
                                    <span class="font-medium">$${(product.price * item.quantity).toFixed(2)}</span>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    <div class="border-t border-gray-200 pt-4 space-y-2">
                        <div class="flex justify-between text-gray-600"><span>Subtotal</span><span>$${subtotal.toFixed(2)}</span></div>
                        <div class="flex justify-between text-gray-600"><span>Shipping</span><span>${shipping === 0 ? 'FREE' : '$' + shipping.toFixed(2)}</span></div>
                        <div class="flex justify-between text-xl font-bold pt-2"><span>Total</span><span>$${total.toFixed(2)}</span></div>
                    </div>
                </div>
            `;
        }

        // ============ SEARCH ============
        function toggleSearch() {
            const searchBar = document.getElementById('search-bar');
            searchBar.classList.toggle('hidden');
            if (!searchBar.classList.contains('hidden')) {
                document.getElementById('search-input').focus();
            }
        }

        function handleSearch(query) {
            const resultsContainer = document.getElementById('search-results');
            if (query.length < 2) {
                resultsContainer.classList.add('hidden');
                return;
            }

            const results = products.filter(p => 
                p.name.toLowerCase().includes(query.toLowerCase()) ||
                p.category.toLowerCase().includes(query.toLowerCase()) ||
                p.subcategory.toLowerCase().includes(query.toLowerCase())
            ).slice(0, 6);

            if (results.length === 0) {
                resultsContainer.innerHTML = '<p class="p-4 text-gray-500">No products found</p>';
            } else {
                resultsContainer.innerHTML = results.map(p => `
                    <div class="flex gap-4 p-4 hover:bg-gray-50 cursor-pointer" onclick="navigateTo('product', ${p.id}); toggleSearch();">
                        <div class="w-16 h-16 rounded-xl overflow-hidden bg-gray-100">
                            <img src="${p.image}" alt="${p.name}" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-brand-black">${p.name}</h4>
                            <p class="text-sm text-gray-500">${p.category}'s ${p.subcategory}</p>
                            <p class="text-brand-orange font-bold">$${p.price.toFixed(2)}</p>
                        </div>
                    </div>
                `).join('');
            }
            resultsContainer.classList.remove('hidden');
        }

        // ============ MODALS ============
        function quickView(productId) {
            const product = products.find(p => p.id === productId);
            document.getElementById('quick-view-content').innerHTML = `
                <div class="flex justify-end p-4">
                    <button onclick="closeQuickView()" class="w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center"><i class="ph ph-x text-xl"></i></button>
                </div>
                <div class="grid md:grid-cols-2 gap-8 p-6 pt-0">
                    <div class="bg-gray-100 rounded-2xl overflow-hidden aspect-square">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover">
                    </div>
                    <div class="space-y-4">
                        <h2 class="text-2xl font-bold">${product.name}</h2>
                        <div class="flex items-center gap-2">
                            <div class="flex text-yellow-400">${'<i class="ph-fill ph-star"></i>'.repeat(Math.floor(product.rating))}</div>
                            <span class="text-gray-500">(${product.reviews} reviews)</span>
                        </div>
                        <p class="text-2xl font-bold text-brand-orange">$${product.price.toFixed(2)}</p>
                        <p class="text-gray-600">${product.description}</p>
                        <div>
                            <span class="font-bold block mb-2">Size</span>
                            <div class="flex gap-2 flex-wrap" id="qv-sizes"></div>
                        </div>
                        <div class="flex gap-3">
                            <button onclick="quickAddToCart(${product.id}); closeQuickView();" class="flex-1 bg-[#ff7b3a] hover:bg-[#e06a30] text-white py-3 rounded-full font-bold transition-colors flex items-center justify-center gap-2">
                                <i class="ph ph-shopping-cart"></i> <span class="text-white">Add to Cart</span>
                            </button>
                            <button onclick="buyNowWhatsApp(${product.id}, '${product.sizes[0]}', '${product.colors[0]}'); closeQuickView();" class="flex-1 bg-[#25D366] hover:bg-[#128C7E] text-white py-3 rounded-full font-bold transition-colors flex items-center justify-center gap-2">
                                <i class="ph-fill ph-whatsapp-logo"></i> <span class="text-white">Buy Now</span>
                            </button>
                        </div>
                        <button onclick="closeQuickView(); navigateTo('product', ${product.id});" class="w-full border-2 border-gray-200 py-3 rounded-full font-bold hover:border-brand-black transition-colors">View Details</button>
                    </div>
                </div>
            `;
            renderSizeButtons('qv-sizes', product.sizes, product.sizes[0]);
            document.getElementById('quick-view-modal').classList.add('active');
        }

        function closeQuickView() {
            document.getElementById('quick-view-modal').classList.remove('active');
        }

        function openSizeGuide() {
            document.getElementById('size-guide-modal').classList.add('active');
        }

        function closeSizeGuide() {
            document.getElementById('size-guide-modal').classList.remove('active');
        }

        // ============ AUTH ============
        function toggleAuth() {
            event?.preventDefault();
            if (currentUser) {
                currentUser = null;
                localStorage.removeItem('currentUser');
                updateAuthLink();
                showToast('Logged out successfully', 'info');
            } else {
                showAuthModal();
            }
        }

        function showAuthModal() {
            document.getElementById('auth-content').innerHTML = `
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold">Sign In</h3>
                    <button onclick="closeAuthModal()" class="w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center"><i class="ph ph-x text-xl"></i></button>
                </div>
                <form onsubmit="handleLogin(event)" class="space-y-4">
                    <input type="email" id="login-email" placeholder="Email" required class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                    <input type="password" id="login-password" placeholder="Password" required class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                    <button type="submit" class="w-full bg-brand-orange text-white py-3 rounded-full font-bold hover:bg-brand-darkOrange transition-colors">Sign In</button>
                </form>
                <p class="text-center mt-4 text-gray-500">Don't have an account? <button onclick="showRegisterForm()" class="text-brand-orange font-semibold">Sign Up</button></p>
            `;
            document.getElementById('auth-modal').classList.add('active');
        }

        function showRegisterForm() {
            document.getElementById('auth-content').innerHTML = `
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold">Create Account</h3>
                    <button onclick="closeAuthModal()" class="w-10 h-10 rounded-full hover:bg-gray-100 flex items-center justify-center"><i class="ph ph-x text-xl"></i></button>
                </div>
                <form onsubmit="handleRegister(event)" class="space-y-4">
                    <input type="text" id="register-name" placeholder="Full Name" required class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                    <input type="email" id="register-email" placeholder="Email" required class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                    <input type="password" id="register-password" placeholder="Password" required class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:border-brand-orange">
                    <button type="submit" class="w-full bg-brand-orange text-white py-3 rounded-full font-bold hover:bg-brand-darkOrange transition-colors">Create Account</button>
                </form>
                <p class="text-center mt-4 text-gray-500">Already have an account? <button onclick="showAuthModal()" class="text-brand-orange font-semibold">Sign In</button></p>
            `;
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            currentUser = { email, name: email.split('@')[0] };
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateAuthLink();
            closeAuthModal();
            showToast(`Welcome back, ${currentUser.name}!`, 'success');
        }

        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            currentUser = { email, name };
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateAuthLink();
            closeAuthModal();
            showToast(`Welcome, ${name}!`, 'success');
        }

        function closeAuthModal() {
            document.getElementById('auth-modal').classList.remove('active');
        }

        function updateAuthLink() {
            const authLink = document.getElementById('auth-link');
            if (currentUser) {
                authLink.textContent = currentUser.name;
            } else {
                authLink.textContent = 'Sign in';
            }
        }

        // ============ MOBILE MENU ============
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const icon = document.getElementById('mobile-menu-icon');
            menu.classList.toggle('hidden');
            icon.classList.toggle('ph-list');
            icon.classList.toggle('ph-x');
        }

        // ============ UTILITIES ============
        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            const colors = { success: 'bg-green-500', error: 'bg-red-500', info: 'bg-brand-black' };
            toast.className = `toast ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2`;
            toast.innerHTML = `<i class="ph ${type === 'success' ? 'ph-check-circle' : type === 'error' ? 'ph-x-circle' : 'ph-info'}"></i> ${message}`;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        function handleNewsletter(e) {
            e.preventDefault();
            const email = document.getElementById('newsletter-email').value;
            document.getElementById('newsletter-email').value = '';
            showToast('Thanks for subscribing!', 'success');
        }

        function startCountdown() {
            const endDate = new Date();
            endDate.setDate(endDate.getDate() + 7);
            
            function update() {
                const now = new Date();
                const diff = endDate - now;
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const secs = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('countdown-days').textContent = String(days).padStart(2, '0');
                document.getElementById('countdown-hours').textContent = String(hours).padStart(2, '0');
                document.getElementById('countdown-mins').textContent = String(mins).padStart(2, '0');
                document.getElementById('countdown-secs').textContent = String(secs).padStart(2, '0');
            }
            
            update();
            setInterval(update, 1000);
        }

        // Close modals on outside click
        document.addEventListener('click', (e) => {
            if (e.target.id === 'quick-view-modal') closeQuickView();
            if (e.target.id === 'auth-modal') closeAuthModal();
            if (e.target.id === 'size-guide-modal') closeSizeGuide();
        });

        // Close search on outside click
        document.addEventListener('click', (e) => {
            const searchBar = document.getElementById('search-bar');
            const searchResults = document.getElementById('search-results');
            if (!searchBar.contains(e.target) && !e.target.closest('button')) {
                searchResults.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
